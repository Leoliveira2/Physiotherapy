import React, { useState, useEffect } from ‚Äòreact‚Äô;
import { Calendar, Save, User, Activity, AlertTriangle, Clock, Search, CheckCircle, XCircle, Home, UserPlus, List, Eye, FileText, Users } from ‚Äòlucide-react‚Äô;

const FisioterapiaApp = () => {
// Estados principais
const [pacientes, setPacientes] = useState({});
const [quartoSelecionado, setQuartoSelecionado] = useState(‚Äô‚Äô);
const [pacienteAtual, setPacienteAtual] = useState(null);
const [modoNovoRegistro, setModoNovoRegistro] = useState(false);
const [telaAtiva, setTelaAtiva] = useState(‚Äòprincipal‚Äô);
const [loading, setLoading] = useState(false);

// Estado do formul√°rio
const [dadosForm, setDadosForm] = useState({
dataAvaliacao: new Date().toISOString().split(‚ÄòT‚Äô)[0],
horaAvaliacao: new Date().toTimeString().split(‚Äô ‚Äô)[0].slice(0, 5),
escalaMobilidade: ‚Äò‚Äô,
ventilacao: ‚Äò‚Äô,
observacoes: ‚Äò‚Äô,
complexidade: ‚Äò‚Äô,
restricaoLeito: ‚ÄòN√£o‚Äô,
altoRiscoQueda: ‚ÄòN√£o‚Äô,
dispositivos1a2: ‚ÄòN√£o‚Äô,
dispositivos3mais: ‚ÄòN√£o‚Äô,
social: ‚ÄòN√£o‚Äô,
mobilizacaoDevice: ‚ÄòN√£o‚Äô,
necessidadeO2: ‚ÄòN√£o‚Äô
});

const [pontuacao, setPontuacao] = useState(0);

// Fun√ß√£o para carregar dados do storage
const carregarDados = () => {
try {
const dadosSalvos = localStorage.getItem(‚Äòfisioterapia_pacientes‚Äô);
if (dadosSalvos) {
const dados = JSON.parse(dadosSalvos);
setPacientes(dados);
console.log(‚ÄòDados carregados:‚Äô, Object.keys(dados).length, ‚Äòpacientes‚Äô);
}
} catch (error) {
console.error(‚ÄòErro ao carregar dados:‚Äô, error);
setPacientes({});
}
};

// Fun√ß√£o para salvar dados no storage
const salvarDados = (novosDados) => {
try {
localStorage.setItem(‚Äòfisioterapia_pacientes‚Äô, JSON.stringify(novosDados));
console.log(‚ÄòDados salvos com sucesso‚Äô);
} catch (error) {
console.error(‚ÄòErro ao salvar dados:‚Äô, error);
alert(‚ÄòErro ao salvar dados. Verifique o espa√ßo de armazenamento do navegador.‚Äô);
}
};

// Carregar dados na inicializa√ß√£o
useEffect(() => {
carregarDados();
}, []);

// Calcular pontua√ß√£o automaticamente
useEffect(() => {
let total = 0;

```
if (dadosForm.complexidade === 'Baixa') total += 1;
else if (dadosForm.complexidade === 'M√©dia') total += 2;
else if (dadosForm.complexidade === 'Alta') total += 3;

if (dadosForm.restricaoLeito === 'Sim') total += 1;
if (dadosForm.altoRiscoQueda === 'Sim') total += 1;
if (dadosForm.dispositivos1a2 === 'Sim') total += 2;
if (dadosForm.dispositivos3mais === 'Sim') total += 3;
if (dadosForm.social === 'Sim') total += 3;
if (dadosForm.mobilizacaoDevice === 'Sim') total += 4;
if (dadosForm.necessidadeO2 === 'Sim') total += 5;

setPontuacao(total);
```

}, [dadosForm]);

// Buscar paciente por quarto
const buscarPacientePorQuarto = (numeroQuarto) => {
if (!numeroQuarto) {
alert(‚ÄòDigite um n√∫mero de quarto‚Äô);
return;
}

```
const paciente = pacientes[numeroQuarto];
if (paciente && !paciente.altaMedica) {
  setPacienteAtual(paciente);
  setModoNovoRegistro(false);
  console.log('Paciente encontrado:', paciente);
} else {
  setPacienteAtual(null);
  setModoNovoRegistro(true);
  console.log('Quarto dispon√≠vel para novo paciente');
}
```

};

// Criar novo paciente
const criarNovoPaciente = (dadosPaciente) => {
setLoading(true);
console.log(‚ÄòCriando novo paciente:‚Äô, dadosPaciente);

```
try {
  const novoPaciente = {
    id: Date.now(),
    quarto: quartoSelecionado,
    ...dadosPaciente,
    dataInternacao: new Date().toISOString().split('T')[0],
    altaMedica: false,
    avaliacoes: []
  };
  
  const novosPacientes = {
    ...pacientes,
    [quartoSelecionado]: novoPaciente
  };
  
  setPacientes(novosPacientes);
  salvarDados(novosPacientes);
  setPacienteAtual(novoPaciente);
  setModoNovoRegistro(false);
  
  alert('Paciente cadastrado com sucesso!');
} catch (error) {
  console.error('Erro ao criar paciente:', error);
  alert('Erro ao cadastrar paciente. Tente novamente.');
} finally {
  setLoading(false);
}
```

};

// Salvar avalia√ß√£o
const salvarAvaliacao = () => {
if (!pacienteAtual) {
alert(‚ÄòErro: Nenhum paciente selecionado‚Äô);
return;
}

```
const novaAvaliacao = {
  id: Date.now(),
  ...dadosForm,
  pontuacaoTotal: pontuacao,
  dataRegistro: new Date().toISOString()
};

const pacienteAtualizado = {
  ...pacienteAtual,
  avaliacoes: [...(pacienteAtual.avaliacoes || []), novaAvaliacao]
};

const novosPacientes = {
  ...pacientes,
  [pacienteAtual.quarto]: pacienteAtualizado
};

setPacientes(novosPacientes);
salvarDados(novosPacientes);
setPacienteAtual(pacienteAtualizado);

// Limpar formul√°rio
setDadosForm({
  dataAvaliacao: new Date().toISOString().split('T')[0],
  horaAvaliacao: new Date().toTimeString().split(' ')[0].slice(0, 5),
  escalaMobilidade: '',
  ventilacao: '',
  observacoes: '',
  complexidade: '',
  restricaoLeito: 'N√£o',
  altoRiscoQueda: 'N√£o',
  dispositivos1a2: 'N√£o',
  dispositivos3mais: 'N√£o',
  social: 'N√£o',
  mobilizacaoDevice: 'N√£o',
  necessidadeO2: 'N√£o'
});

alert('Avalia√ß√£o salva com sucesso!');
```

};

// Dar alta m√©dica
const darAltaMedica = () => {
if (!pacienteAtual) return;

```
const pacienteComAlta = {
  ...pacienteAtual,
  altaMedica: true,
  dataAlta: new Date().toISOString().split('T')[0]
};

const novosPacientes = {
  ...pacientes,
  [pacienteAtual.quarto]: pacienteComAlta
};

setPacientes(novosPacientes);
salvarDados(novosPacientes);
setPacienteAtual(null);
setModoNovoRegistro(true);

alert('Alta m√©dica registrada com sucesso!');
```

};

// Visualizar paciente espec√≠fico
const visualizarPaciente = (quarto) => {
setQuartoSelecionado(quarto);
const paciente = pacientes[quarto];
setPacienteAtual(paciente);
setModoNovoRegistro(false);
setTelaAtiva(‚Äòprincipal‚Äô);
};

const handleInputChange = (field, value) => {
setDadosForm(prev => ({
‚Ä¶prev,
[field]: value
}));
};

const getComplexidadeColor = () => {
switch(dadosForm.complexidade) {
case ‚ÄòBaixa‚Äô: return ‚Äòtext-green-600 bg-green-50 border-green-200‚Äô;
case ‚ÄòM√©dia‚Äô: return ‚Äòtext-yellow-600 bg-yellow-50 border-yellow-200‚Äô;
case ‚ÄòAlta‚Äô: return ‚Äòtext-red-600 bg-red-50 border-red-200‚Äô;
default: return ‚Äòtext-gray-600 bg-gray-50 border-gray-200‚Äô;
}
};

// Tela de consulta de registros
if (telaAtiva === ‚Äòconsulta‚Äô) {
return (
<TelaConsulta
pacientes={pacientes}
onVoltar={() => setTelaAtiva(‚Äòprincipal‚Äô)}
onVisualizarPaciente={visualizarPaciente}
/>
);
}

return (
<div className="max-w-6xl mx-auto p-6 bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
{/* Header com navega√ß√£o */}
<div className="bg-white rounded-xl shadow-lg p-6 mb-6">
<div className="flex justify-between items-center">
<div>
<h1 className="text-3xl font-bold text-gray-900 flex items-center gap-3">
<Activity className="text-blue-600" size={36} />
Sistema de Registro de Pacientes - Fisioterapia
</h1>
<p className="text-gray-600 mt-2">Gest√£o inteligente por quarto com hist√≥rico completo</p>
</div>
<button
onClick={() => setTelaAtiva(‚Äòconsulta‚Äô)}
className=‚Äúbg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg flex items-center gap-2 transition-colors‚Äù
>
<Users size={20} />
Consultar Registros
</button>
</div>
</div>

```
  {/* Busca por Quarto */}
  <div className="bg-white rounded-xl shadow-lg p-6 mb-6">
    <div className="flex items-center gap-4">
      <div className="flex-1">
        <label className="block text-sm font-medium text-gray-700 mb-2">
          N√∫mero do Quarto
        </label>
        <div className="flex gap-3">
          <input
            type="text"
            value={quartoSelecionado}
            onChange={(e) => setQuartoSelecionado(e.target.value)}
            className="flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-lg"
            placeholder="Ex: 520"
          />
          <button
            onClick={() => buscarPacientePorQuarto(quartoSelecionado)}
            className="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg flex items-center gap-2 transition-colors"
          >
            <Search size={20} />
            Buscar
          </button>
        </div>
      </div>
    </div>

    {/* Status do Quarto */}
    {quartoSelecionado && (
      <div className="mt-4">
        {pacienteAtual && !pacienteAtual.altaMedica ? (
          <div className="bg-green-50 border border-green-200 rounded-lg p-4">
            <div className="flex items-center justify-between">
              <div>
                <h3 className="text-lg font-semibold text-green-800">{pacienteAtual.nomeCompleto}</h3>
                <p className="text-green-600">Internado desde: {new Date(pacienteAtual.dataInternacao).toLocaleDateString('pt-BR')}</p>
                <p className="text-green-600">Avalia√ß√µes: {pacienteAtual.avaliacoes?.length || 0}</p>
              </div>
              <button
                onClick={darAltaMedica}
                className="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors"
              >
                <Home size={16} />
                Alta M√©dica
              </button>
            </div>
          </div>
        ) : modoNovoRegistro ? (
          <div className="bg-blue-50 border border-blue-200 rounded-lg p-4">
            <div className="flex items-center gap-2">
              <UserPlus className="text-blue-600" size={20} />
              <span className="text-blue-800 font-medium">Quarto dispon√≠vel - Cadastrar novo paciente</span>
            </div>
          </div>
        ) : (
          <div className="bg-gray-50 border border-gray-200 rounded-lg p-4">
            <span className="text-gray-600">Digite um n√∫mero de quarto para continuar</span>
          </div>
        )}
      </div>
    )}
  </div>

  {/* Formul√°rio de Novo Paciente */}
  {modoNovoRegistro && quartoSelecionado && (
    <NovoPacienteForm 
      quarto={quartoSelecionado} 
      onCriarPaciente={criarNovoPaciente}
      loading={loading}
    />
  )}

  {/* Formul√°rio de Avalia√ß√£o */}
  {pacienteAtual && !pacienteAtual.altaMedica && (
    <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
      {/* Coluna Principal - Avalia√ß√£o */}
      <div className="lg:col-span-2 space-y-6">
        <AvaliacaoForm 
          dadosForm={dadosForm}
          handleInputChange={handleInputChange}
          getComplexidadeColor={getComplexidadeColor}
        />
      </div>

      {/* Coluna Lateral - Crit√©rios */}
      <div className="space-y-6">
        <CriteriosAvaliacao 
          dadosForm={dadosForm}
          handleInputChange={handleInputChange}
          pontuacao={pontuacao}
          onSalvar={salvarAvaliacao}
        />
      </div>
    </div>
  )}

  {/* Hist√≥rico de Avalia√ß√µes */}
  {pacienteAtual && pacienteAtual.avaliacoes?.length > 0 && (
    <HistoricoAvaliacoes avaliacoes={pacienteAtual.avaliacoes} />
  )}
</div>
```

);
};

// Componente para novo paciente
const NovoPacienteForm = ({ quarto, onCriarPaciente, loading }) => {
const [dadosPaciente, setDadosPaciente] = useState({
nomeCompleto: ‚Äò‚Äô,
dataNascimento: ‚Äò‚Äô,
registro: ‚Äò‚Äô,
medicoAssistente: ‚Äò‚Äô,
diagnostico: ‚Äò‚Äô
});

const handleSubmit = (e) => {
e.preventDefault();

```
if (!dadosPaciente.nomeCompleto.trim()) {
  alert('Nome completo √© obrigat√≥rio');
  return;
}

if (!dadosPaciente.diagnostico.trim()) {
  alert('Diagn√≥stico √© obrigat√≥rio');
  return;
}

console.log('Submetendo formul√°rio com dados:', dadosPaciente);
onCriarPaciente(dadosPaciente);
```

};

const handleChange = (field, value) => {
setDadosPaciente(prev => ({
‚Ä¶prev,
[field]: value
}));
};

return (
<div className="bg-white rounded-xl shadow-lg p-6 mb-6">
<h2 className="text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2">
<UserPlus className="text-blue-600" />
Cadastrar Novo Paciente - Quarto {quarto}
</h2>

```
  <form onSubmit={handleSubmit} className="grid grid-cols-1 md:grid-cols-2 gap-4">
    <div className="md:col-span-2">
      <label className="block text-sm font-medium text-gray-700 mb-1">
        Nome Completo *
      </label>
      <input
        type="text"
        value={dadosPaciente.nomeCompleto}
        onChange={(e) => handleChange('nomeCompleto', e.target.value)}
        className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
        placeholder="Digite o nome completo do paciente"
        required
        disabled={loading}
      />
    </div>
    
    <div>
      <label className="block text-sm font-medium text-gray-700 mb-1">
        Data de Nascimento
      </label>
      <input
        type="date"
        value={dadosPaciente.dataNascimento}
        onChange={(e) => handleChange('dataNascimento', e.target.value)}
        className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
        disabled={loading}
      />
    </div>
    
    <div>
      <label className="block text-sm font-medium text-gray-700 mb-1">
        Registro
      </label>
      <input
        type="text"
        value={dadosPaciente.registro}
        onChange={(e) => handleChange('registro', e.target.value)}
        className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
        placeholder="N√∫mero do registro"
        disabled={loading}
      />
    </div>
    
    <div>
      <label className="block text-sm font-medium text-gray-700 mb-1">
        M√©dico Assistente
      </label>
      <input
        type="text"
        value={dadosPaciente.medicoAssistente}
        onChange={(e) => handleChange('medicoAssistente', e.target.value)}
        className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
        placeholder="Nome do m√©dico respons√°vel"
        disabled={loading}
      />
    </div>
    
    <div className="md:col-span-2">
      <label className="block text-sm font-medium text-gray-700 mb-1">
        Diagn√≥stico *
      </label>
      <textarea
        value={dadosPaciente.diagnostico}
        onChange={(e) => handleChange('diagnostico', e.target.value)}
        rows={2}
        className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
        placeholder="Diagn√≥stico principal do paciente"
        required
        disabled={loading}
      />
    </div>
    
    <div className="md:col-span-2">
      <button
        type="submit"
        disabled={loading}
        className={`w-full font-semibold py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2 ${
          loading 
            ? 'bg-gray-400 cursor-not-allowed text-gray-600' 
            : 'bg-green-600 hover:bg-green-700 text-white'
        }`}
      >
        <UserPlus size={20} />
        {loading ? 'Cadastrando...' : 'Cadastrar Paciente'}
      </button>
    </div>
  </form>
</div>
```

);
};

// Componente do formul√°rio de avalia√ß√£o
const AvaliacaoForm = ({ dadosForm, handleInputChange, getComplexidadeColor }) => (

  <div className="bg-white rounded-xl shadow-lg p-6">
    <h2 className="text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2">
      <Activity className="text-green-600" />
      Nova Avalia√ß√£o Fisioterap√™utica
    </h2>

```
<div className="grid grid-cols-2 gap-4 mb-6">
  <div>
    <label className="block text-sm font-medium text-gray-700 mb-1">
      Data da Avalia√ß√£o
    </label>
    <input
      type="date"
      value={dadosForm.dataAvaliacao}
      onChange={(e) => handleInputChange('dataAvaliacao', e.target.value)}
      className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
    />
  </div>
  <div>
    <label className="block text-sm font-medium text-gray-700 mb-1">
      Hora da Avalia√ß√£o
    </label>
    <input
      type="time"
      value={dadosForm.horaAvaliacao}
      onChange={(e) => handleInputChange('horaAvaliacao', e.target.value)}
      className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
    />
  </div>
</div>

<div className="grid grid-cols-2 gap-4 mb-4">
  <div>
    <label className="block text-sm font-medium text-gray-700 mb-1">
      Escala de Mobilidade (JH)
    </label>
    <select
      value={dadosForm.escalaMobilidade}
      onChange={(e) => handleInputChange('escalaMobilidade', e.target.value)}
      className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
    >
      <option value="">Selecione</option>
      <option value="1">1 - Totalmente dependente</option>
      <option value="2">2 - Dependente com ajuda</option>
      <option value="3">3 - Parcialmente independente</option>
      <option value="4">4 - Independente</option>
    </select>
  </div>
  <div>
    <label className="block text-sm font-medium text-gray-700 mb-1">
      Complexidade
    </label>
    <select
      value={dadosForm.complexidade}
      onChange={(e) => handleInputChange('complexidade', e.target.value)}
      className={`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${getComplexidadeColor()}`}
    >
      <option value="">Selecione</option>
      <option value="Baixa">Baixa</option>
      <option value="M√©dia">M√©dia</option>
      <option value="Alta">Alta</option>
    </select>
  </div>
</div>

<div className="mb-4">
  <label className="block text-sm font-medium text-gray-700 mb-1">
    Ventila√ß√£o/Suporte Respirat√≥rio
  </label>
  <textarea
    value={dadosForm.ventilacao}
    onChange={(e) => handleInputChange('ventilacao', e.target.value)}
    rows={3}
    className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
    placeholder="Ex: VNI 2X60' (M/N), CN 1L/MIN, AA (Ar Ambiente)"
  />
</div>

<div>
  <label className="block text-sm font-medium text-gray-700 mb-1">
    Observa√ß√µes da Avalia√ß√£o
  </label>
  <textarea
    value={dadosForm.observacoes}
    onChange={(e) => handleInputChange('observacoes', e.target.value)}
    rows={4}
    className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
    placeholder="Observa√ß√µes sobre a sess√£o de fisioterapia, evolu√ß√£o, condutas..."
  />
</div>
```

  </div>
);

// Componente dos crit√©rios de avalia√ß√£o
const CriteriosAvaliacao = ({ dadosForm, handleInputChange, pontuacao, onSalvar }) => {
const criterios = [
{ key: ‚ÄòrestricaoLeito‚Äô, label: ‚ÄòRestrito ao Leito‚Äô, icon: ‚ÄòüõèÔ∏è‚Äô, pontos: 1 },
{ key: ‚ÄòaltoRiscoQueda‚Äô, label: ‚ÄòAlto Risco de Queda‚Äô, icon: ‚Äò‚ö†Ô∏è‚Äô, pontos: 1 },
{ key: ‚Äòdispositivos1a2‚Äô, label: ‚Äò1 a 2 Dispositivos‚Äô, icon: ‚Äòüîå‚Äô, pontos: 2 },
{ key: ‚Äòdispositivos3mais‚Äô, label: ‚Äò3+ Dispositivos‚Äô, icon: ‚Äòüîå‚Äô, pontos: 3 },
{ key: ‚Äòsocial‚Äô, label: ‚ÄòQuest√£o Social‚Äô, icon: ‚Äòüë•‚Äô, pontos: 3 },
{ key: ‚ÄòmobilizacaoDevice‚Äô, label: ‚ÄòMobiliza√ß√£o c/ Device‚Äô, icon: ‚Äòü¶Ω‚Äô, pontos: 4 },
{ key: ‚ÄònecessidadeO2‚Äô, label: ‚ÄòNecessidade de O‚ÇÇ/DVA‚Äô, icon: ‚Äòüí®‚Äô, pontos: 5 }
];

return (
<div className="space-y-6">
{/* Crit√©rios */}
<div className="bg-white rounded-xl shadow-lg p-6">
<h2 className="text-xl font-semibold text-gray-900 mb-6 flex items-center gap-2">
<AlertTriangle className="text-yellow-600" />
Crit√©rios de Avalia√ß√£o
</h2>

```
    <div className="space-y-4">
      {criterios.map((criterio) => (
        <div key={criterio.key} className="bg-gradient-to-r from-gray-50 to-gray-100 p-4 rounded-lg">
          <div className="flex items-center justify-between mb-3">
            <div className="flex items-center gap-2">
              <span className="text-2xl">{criterio.icon}</span>
              <span className="font-medium text-gray-800">{criterio.label}</span>
            </div>
            <span className="bg-blue-100 text-blue-800 text-xs font-semibold px-2 py-1 rounded-full">
              +{criterio.pontos} pts
            </span>
          </div>
          
          <div className="flex gap-3">
            <button
              onClick={() => handleInputChange(criterio.key, 'Sim')}
              className={`flex-1 flex items-center justify-center gap-2 py-2 px-4 rounded-lg font-medium transition-all ${
                dadosForm[criterio.key] === 'Sim' 
                  ? 'bg-green-500 text-white shadow-lg transform scale-105' 
                  : 'bg-white text-gray-600 border border-gray-300 hover:bg-green-50'
              }`}
            >
              <CheckCircle size={16} />
              Sim
            </button>
            <button
              onClick={() => handleInputChange(criterio.key, 'N√£o')}
              className={`flex-1 flex items-center justify-center gap-2 py-2 px-4 rounded-lg font-medium transition-all ${
                dadosForm[criterio.key] === 'N√£o' 
                  ? 'bg-red-500 text-white shadow-lg transform scale-105' 
                  : 'bg-white text-gray-600 border border-gray-300 hover:bg-red-50'
              }`}
            >
              <XCircle size={16} />
              N√£o
            </button>
          </div>
        </div>
      ))}
    </div>
  </div>

  {/* Pontua√ß√£o Total */}
  <div className="bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl shadow-lg p-6 text-white text-center">
    <h3 className="text-xl font-semibold mb-4">Pontua√ß√£o Total</h3>
    <div className="text-6xl font-bold mb-2">
      {pontuacao}
    </div>
    <div className="bg-white bg-opacity-20 rounded-lg p-3">
      <p className="font-medium">
        {pontuacao >= 15 ? 'üî¥ Alta Complexidade' : 
         pontuacao >= 10 ? 'üü° M√©dia Complexidade' : 
         'üü¢ Baixa Complexidade'}
      </p>
    </div>
  </div>

  {/* Bot√£o Salvar */}
  <button
    onClick={onSalvar}
    className="w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-4 px-6 rounded-xl transition-all shadow-lg hover:shadow-xl transform hover:scale-105 flex items-center justify-center gap-2"
  >
    <Save size={20} />
    Salvar Avalia√ß√£o
  </button>
</div>
```

);
};

// Componente do hist√≥rico
const HistoricoAvaliacoes = ({ avaliacoes }) => (

  <div className="bg-white rounded-xl shadow-lg p-6 mt-6">
    <h2 className="text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2">
      <Clock className="text-purple-600" />
      Hist√≥rico de Avalia√ß√µes ({avaliacoes.length})
    </h2>

```
<div className="space-y-3">
  {avaliacoes.slice(-5).reverse().map((avaliacao, index) => (
    <div key={avaliacao.id} className="bg-gray-50 p-4 rounded-lg border-l-4 border-blue-500">
      <div className="flex justify-between items-start">
        <div>
          <p className="font-medium">
            {new Date(avaliacao.dataAvaliacao).toLocaleDateString('pt-BR')} √†s {avaliacao.horaAvaliacao}
          </p>
          <p className="text-sm text-gray-600">
            Pontua√ß√£o: {avaliacao.pontuacaoTotal} | Complexidade: {avaliacao.complexidade}
          </p>
          {avaliacao.observacoes && (
            <p className="text-sm text-gray-600 mt-1 italic">
              "{avaliacao.observacoes.substring(0, 100)}{avaliacao.observacoes.length > 100 ? '...' : ''}"
            </p>
          )}
        </div>
        <span className="bg-blue-100 text-blue-800 text-xs font-semibold px-2 py-1 rounded-full">
          #{avaliacoes.length - index}
        </span>
      </div>
    </div>
  ))}
</div>
```

  </div>
);

// Tela de consulta de registros
const TelaConsulta = ({ pacientes, onVoltar, onVisualizarPaciente }) => {
const [filtro, setFiltro] = useState(‚Äòtodos‚Äô);
const [busca, setBusca] = useState(‚Äô‚Äô);

const pacientesArray = Object.values(pacientes);

const pacientesFiltrados = pacientesArray.filter(paciente => {
const matchFiltro = filtro === ‚Äòtodos‚Äô ||
(filtro === ‚Äòinternados‚Äô && !paciente.altaMedica) ||
(filtro === ‚Äòalta‚Äô && paciente.altaMedica);

```
const matchBusca = !busca || 
                  paciente.nomeCompleto?.toLowerCase().includes(busca.toLowerCase()) ||
                  paciente.quarto?.toString().includes(busca) ||
                  paciente.diagnostico?.toLowerCase().includes(busca.toLowerCase());

return matchFiltro && matchBusca;
```

});

return (
<div className="max-w-6xl mx-auto p-6 bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
{/* Header */}
<div className="bg-white rounded-xl shadow-lg p-6 mb-6">
<div className="flex justify-between items-center">
<div>
<h1 className="text-3xl font-bold text-gray-900 flex items-center gap-3">
<Users className="text-green-600" size={36} />
Consulta de Registros
</h1>
<p className="text-gray-600 mt-2">Visualize todos os pacientes e seus registros</p>
</div>
<button
onClick={onVoltar}
className="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg flex items-center gap-2 transition-colors"
>
<Activity size={20} />
Voltar ao Sistema
</button>
</div>
</div>

```
  {/* Filtros e Busca */}
  <div className="bg-white rounded-xl shadow-lg p-6 mb-6">
    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div>
        <label className="block text-sm font-medium text-gray-700 mb-2">
          Filtrar por Status
        </label>
        <select
          value={filtro}
          onChange={(e) => setFiltro(e.target.value)}
          className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
        >
          <option value="todos">Todos os Pacientes</option>
          <option value="internados">Pacientes Internados</option>
          <option value="alta">Pacientes com Alta</option>
        </select>
      </div>
      
      <div>
        <label className="block text-sm font-medium text-gray-700 mb-2">
          Buscar
        </label>
        <input
          type="text"
          value={busca}
          onChange={(e) => setBusca(e.target.value)}
          className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
          placeholder="Nome, quarto ou diagn√≥stico..."
        />
      </div>
    </div>
  </div>

  {/* Estat√≠sticas */}
  <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
    <div className="bg-white rounded-xl shadow-lg p-6">
      <div className="flex items-center gap-4">
        <div className="bg-blue-100 p-3 rounded-full">
          <Users className="text-blue-600" size={24} />
        </div>
        <div>
          <h3 className="text-2xl font-bold text-gray-900">{pacientesArray.length}</h3>
          <p className="text-gray-600">Total de Pacientes</p>
        </div>
      </div>
    </div>
    
    <div className="bg-white rounded-xl shadow-lg p-6">
      <div className="flex items-center gap-4">
        <div className="bg-green-100 p-3 rounded-full">
          <Activity className="text-green-600" size={24} />
        </div>
        <div>
          <h3 className="text-2xl font-bold text-gray-900">
            {pacientesArray.filter(p => !p.altaMedica).length}
          </h3>
          <p className="text-gray-600">Pacientes Internados</p>
        </div>
      </div>
    </div>
    
    <div className="bg-white rounded-xl shadow-lg p-6">
      <div className="flex items-center gap-4">
        <div className="bg-purple-100 p-3 rounded-full">
          <FileText className="text-purple-600" size={24} />
        </div>
        <div>
          <h3 className="text-2xl font-bold text-gray-900">
            {pacientesArray.reduce((total, p) => total + (p.avaliacoes?.length || 0), 0)}
          </h3>
          <p className="text-gray-600">Total de Avalia√ß√µes</p>
        </div>
      </div>
    </div>
  </div>

  {/* Lista de Pacientes */}
  <div className="bg-white rounded-xl shadow-lg p-6">
    <h2 className="text-xl font-semibold text-gray-900 mb-4">
      Pacientes Encontrados ({pacientesFiltrados.length})
    </h2>
    
    {pacientesFiltrados.length === 0 ? (
      <div className="text-center py-8">
        <p className="text-gray-500">Nenhum paciente encontrado com os crit√©rios selecionados</p>
      </div>
    ) : (
      <div className="space-y-4">
        {pacientesFiltrados.map((paciente) => (
          <div key={paciente.id} className="border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors">
            <div className="flex justify-between items-start">
              <div className="flex-1">
                <div className="flex items-center gap-3 mb-2">
                  <span className="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm font-medium">
                    Quarto {paciente.quarto}
                  </span>
                  {paciente.altaMedica ? (
                    <span className="bg-red-100 text-red-800 px-2 py-1 rounded-full text-sm">
                      Alta em {new Date(paciente.dataAlta).toLocaleDateString('pt-BR')}
                    </span>
                  ) : (
                    <span className="bg-green-100 text-green-800 px-2 py-1 rounded-full text-sm">
                      Internado
                    </span>
                  )}
                </div>
                
                <h3 className="text-lg font-semibold text-gray-900 mb-1">
                  {paciente.nomeCompleto}
                </h3>
                
                <div className="grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-gray-600">
                  <p><strong>Diagn√≥stico:</strong> {paciente.diagnostico}</p>
                  <p><strong>M√©dico:</strong> {paciente.medicoAssistente || 'N√£o informado'}</p>
                  <p><strong>Data Interna√ß√£o:</strong> {new Date(paciente.dataInternacao).toLocaleDateString('pt-BR')}</p>
                  <p><strong>Avalia√ß√µes:</strong> {paciente.avaliacoes?.length || 0}</p>
                </div>
              </div>
              
              <button
                onClick={() => onVisualizarPaciente(paciente.quarto)}
                className="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors ml-4"
              >
                <Eye size={16} />
                Visualizar
              </button>
            </div>
          </div>
        ))}
      </div>
    )}
  </div>
</div>
```

);
};

export default FisioterapiaApp;
